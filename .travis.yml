sudo: false
language: node_js

git:
    submodules: false

before_install:
  - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules;
  - git submodule update --init --recursive

node_js:
  - "10"

script:
  - npm run lint;

deploy:
- provider: npm
  email: "info@deepstream.io"
  api_key: ${NPM_TOKEN}
  skip_cleanup: true
  on:
    tags: true
    node_js: '10'

notifications:
  email: false
